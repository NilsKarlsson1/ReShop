<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panier</title>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="../css/style.css"/>

</head>
<body>
  
    <header>
        <div class="container-fluid">
            <div class="row">
                <!-- logo -->
                <div>
                    <a href="/"><img src="assets/logo.png" class="img-fluid" alt="Responsive image" width="75" height="75"></a>
                </div>
                <!-- titre -->
                <div class="col-md-2 my-md-3">
                    <a href="/" class="text-color" style="color:#f9f9f9"><h2 class="text-color">ReShop</h2></a>
                </div>
                <!-- recherche -->
                <div class="input-group col my-md-4 mx-auto">
                    <input type="search" class="form-control form-control-md  primary-color" id="searching" placeholder="Que recherchez-vous ?">
                    <div class="input-group-append">
                      <button class="btn" type="button" id="btnS" onclick="srch(1);window.location='/search';">
                        <i class="fa fa-search"></i>
                      </button>
                    </div>
                </div>
                <!-- profile -->
                <div>
                    <a href="/profile"><img src="./assets/profile.png" class="img-fluid my-md-3" alt="Responsive image" width="45" height="45"></a>
                </div>
                <div class="col-1">
                    <p class="my-md-4 text-color">
                        <a class="text-color" style="color:#f9f9f9" href="/profile">Mon compte</a>
                    </p>
                </div>
                <!-- panier -->
                <div>
                    <a href="/caddy"><img src="./assets/basket.png" class="img-fluid my-md-3" alt="Responsive image" width="45" height="45"></a>
                </div>
                <div class="col-1">
                    <p class="my-md-4 text-color" href="/caddy">
                        <a class="text-color" style="color:#f9f9f9" href="/caddy">Panier</a>
                    </p>
                </div>
            </div>
        </div>
    </header>

    <!-- Subheader -->
    <div class="subheader">
        <div class="row justify-content-center">
            <!-- Figurines -->
            <div class="col-1">
                <div class="btn-group" role="group">
                    <button id="btnDropFig" type="button" class="btn button" aria-haspopup="true" aria-expanded="false" onclick="cate(1)">
                      Figurines
                    </button>
                  </div>
            </div>
            <!-- Vêtements -->
            <div class="col-1">
                <div class="btn-group" role="group">
                    <button id="btnDropvet" type="button" class="btn button" aria-haspopup="true" aria-expanded="false" onclick="cate(2)">
                      Vêtements
                    </button>
                </div>
            </div>
            <!-- Décoration -->
            <div class="col-1">
                <div class="btn-group" role="group">
                    <button id="btnDropDeco" type="button" class="btn button" aria-haspopup="true" aria-expanded="false"onclick="cate(3)">
                      Décoration
                    </button>
                </div>
            </div>
            <!-- Accessoires -->
            <div class="col-1">
                <div class="btn-group" role="group">
                    <button id="btnDropAccess" type="button" class="btn button"aria-haspopup="true" aria-expanded="false" onclick="cate(4)">
                        Accessoires
                    </button>
                </div>
            </div>
            <!-- Jeux -->
            <div class="col-1">
                <div class="btn-group" role="group">
                    <button id="btnDropJeux" type="button" class="btn button" aria-haspopup="true" aria-expanded="false"onclick="cate(5)">
                        Jeux
                    </button>
                </div>
            </div>
        </div>
    </div>


    <main>
        <div class="container-fluid">
            <!-- bloc nouveauté -->
            <h1 class="text-left col">Résultat de votre recherche:</h1>
            <!-- 1 ligne -->
            <div class="row justify-content-center" id="personinfo">
                
            </div>
        </div>

        <!-- cookies -->
        <div class="modal fade" id="cookieModal" tabindex="-1" role="dialog" aria-hidden="true">
            <div class="modal-dialog" role="document">
              <div class="modal-content">
                <div class="modal-body">
                  <div class="notice d-flex justify-content-between align-items-center">
                    <div class="cookie-text col">Ce site web utilise les cookies pour personnaliser le contenu et analyser le trafic afin de vous offrir la meilleure expérience.</div>
                    <div class="buttons d-flex flex-column flex-lg-row">
                      <a href="#a" class="btn btn-product btn-md" data-dismiss="modal" onclick='addCookie("navigation","yes",1)'>J'accepte</a>
                      <a href="/informations" class="btn btn-secondary btn-md" data-dismiss="modal" onclick='window.location.href="/informations"'>En savoir plus</a>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
    </main>


    <footer>
        <div class="container-fluid">
            <div class="row justify-content-center">
                <!-- recherche -->
                <div class="input-group col-lg-4 mx-auto my-md-3">
                    <input type="search" id="search2" class="form-control form-control-md  primary-color" placeholder="Que recherchez-vous ?">
                    <div class="input-group-append">
                        <button class="btn" type="button" onclick="srch('2');window.location='/search';">
                          <i class="fa fa-search"></i>
                      </button>
                    </div>
                </div>
            </div>
            <div class="row justify-content-center">
                <!-- Produits -->
                <div class="col">
                    <h5 class="col font-weight-bold">Produits</h5>
                    <h6 class="col">Figurines</h6>
                    <h6 class="col">Vêtements</h6>
                    <h6 class="col">Décoration</h6>
                    <h6 class="col">Accessoires</h6>
                    <h6 class="col">Jeux</h6>
                </div>
                <!-- Informations -->
                <div class="col">
                    <h5 class="font-weight-bold">Informations</h5>
                    <h6>Nous contacter</h6>
                </div>
                <!-- Mentions -->
                <div class="col">
                    <h5 class="font-weight-bold"> <a href="/informations" style="color:#333333"> Mentions légales </a> </h5>
                </div>
                <!-- espace vendeur -->
                <div class="col">
                    <h5 class="font-weight-bold">Espace vendeur</h5>
                </div>
                <!-- logo -->
                <div class="col">
                    <img src="assets/logo.png" class="img-fluid" alt="Responsive image" width="150" height="150">
                </div>
            </div>
        </div>
    </footer>

    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
    <script src="/js/cookies.js"></script>
    <script>
        $(document).ready(function() {
            if(getCookie("navigation") == "") 
            { 
                window.location.href = "/";
            }
        });
    </script>
    
<script>
    var baseurl = "http://localhost:8081/product";
    function loadArticles(){
      var xmlhttp = new XMLHttpRequest();
      var srch = getCookie("elem");
      xmlhttp.open("GET",baseurl + "/search?name="+srch,true);
      xmlhttp.onreadystatechange = function() {
        if(xmlhttp.readyState ===4 && xmlhttp.status ===200){
          var articles = JSON.parse(xmlhttp.responseText);
          
          //main table content we fill from data from the rest call
          var main ="";

          for (i = 0; i < articles.length; i++){
            var tmp = "choisi('"+articles[i].lien+"')";
            main += '<div class="col-2"><div class="container-fluid"><div class="text-center"><img id="img_product" src='+articles[i].img+' class="center-block" alt="" width="100" height="100" ></div></div><h4 id="name_product" class="title-color text-center font-weight-bold" onclick="'+tmp+'">'+articles[i].titre+'</h4><p id="price_product" class="little-color text-center">'+articles[i].prix+'</p></div>';
          }
          
          document.getElementById("personinfo").innerHTML = main;
        }
      };
      xmlhttp.send();
    }
    window.onload = function(){
        document.getElementById("searching").value = getCookie("elem");
        loadArticles();
    }
  </script>

<script>
    function srch(p){
      deleteCookie("elem");
      if(p=='1'){
          var feild = document.getElementById("searching").value
          addCookie("elem", feild );
      } else {
          var feild = document.getElementById("search2").value
          addCookie("elem", feild );
      }
      
          
    }
</script>

<script>
    function cate(p){
        if(p=='1'){
            document.getElementById("searching").value = "figurine"
        } 
        if(p=='2'){
            document.getElementById("searching").value = "vetement"
        }
        if(p=='3'){
            document.getElementById("searching").value = "décoration"
        }
        if(p=='4'){
            document.getElementById("searching").value = "accessoire"
        }
        if(p=='5'){
            document.getElementById("searching").value = "jeu"
        }
        document.getElementById("btnS").click();
    }
    
    </script>
<script>
    function choisi(p){
        deleteCookie("choix");
        addCookie("choix", p );
        window.location.href = "/product";
    }
</script>


</body>
</html>